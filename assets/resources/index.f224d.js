window.__require=function e(t,i,n){function s(a,l){if(!i[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!l&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var r=i[a]={exports:{}};t[a][0].call(r.exports,function(e){return s(t[a][1][e]||e)},r,r.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<n.length;a++)s(n[a]);return s}({NSTAudio:[function(e,t){"use strict";cc._RF.push(t,"77942pPHa1EUYQDEqnkEYtQ","NSTAudio"),cc.Class({extends:cc.Component,properties:{bgmAudio:{type:cc.AudioClip,default:[]},stopWheel:{type:cc.AudioClip,default:null},bigWinEf:{type:cc.AudioClip,default:[]},clickSound:{type:cc.AudioClip,default:[]},BigCionSound:{type:cc.AudioClip,default:[]},FreeGameSound:{type:cc.AudioClip,default:[]},H1Sound:{type:cc.AudioClip,default:null}},onLoad:function(){this.pInfo=e("PlayerInfo").getInstant},start:function(){cc.audioEngine.stopAll(),this.playBgm(0)},stopAudio:function(){cc.audioEngine.stopAll()},playBgm:function(e){0!=this.pInfo.musicControl&&(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(this.bgmAudio[e],!0))},playStopWheel:function(){this.playEf(this.stopWheel)},playBW:function(e){var t=parseInt(e);this.playEf(this.bigWinEf[t])},playClickSound:function(e){cc.audioEngine.playEffect(this.clickSound[e],!1)},playBigCionSound:function(e){cc.audioEngine.playEffect(this.BigCionSound[e],!1)},playFreeGameSound:function(e){cc.audioEngine.playEffect(this.FreeGameSound[e])},playH1Sound:function(){cc.audioEngine.playEffect(this.H1Sound)},playEf:function(e){0!=this.pInfo.soundEffectControl&&cc.audioEngine.playEffect(e)}}),cc._RF.pop()},{PlayerInfo:void 0}],NSTMain:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}cc._RF.push(t,"6311aEum1NP7IR7fuL/KcSp","NSTMain");var o=[30,1e3,100,10],a=[1,2,3,4,5],l=[2,.2,.1,1,.2,.1,.4,.1,.05,.4,.1,.05,.4,.1,.05,.4,.1,.05,3,.6,.2];cc.Class({extends:cc.Component,properties:{spUserFace:{default:null,type:cc.Sprite,displayName:"\u7528\u6237\u5934\u50cf"},lblUserName:{default:null,type:cc.Label,displayName:"\u7528\u6237\u540d"},lblUserCoin:{default:null,type:cc.Label,displayName:"\u7528\u6237\u91d1\u5e01"},lblBet:{default:null,type:cc.Label,displayName:"\u5355\u6ce8"},lblLines:{default:null,type:cc.Label,displayName:"\u7ebf\u6570"},lblCurBet:{default:null,type:cc.Label,displayName:"\u672c\u5c40\u603b\u6ce8"},lblWinCoin:{default:null,type:cc.Label,displayName:"\u672c\u5c40\u8d62\u5f97"},lblWinCoin2:{default:null,type:cc.Label,displayName:"\u672c\u5c40\u8d62\u5f972"},lblCoinList:{default:[],type:cc.Label,displayName:"\u5217\u500d\u7387\u663e\u793a"},rollBtnAnim:{default:null,type:cc.Animation,displayName:"roll\u6309\u94ae\u52a8\u753b"},rolePb:{default:[],type:cc.Prefab,displayName:"\u6eda\u8f6e\u89d2\u8272Pb"},spAtlas:{default:null,type:cc.SpriteAtlas,displayName:"\u56fe\u96c6"},autoBtn:{default:null,type:cc.Sprite,displayName:"\u81ea\u52a8\u6309\u94aeSprite"},effectAnimPr:{default:null,type:cc.Node,displayName:"\u4e2d\u5956\u7279\u6548"},effectAnimFullA:{default:null,type:cc.Node,displayName:"\u4e2d\u5956\u5168\u5c4f\u7279\u6548A"},effectAnimFullB:{default:null,type:cc.Node,displayName:"\u4e2d\u5956\u5168\u5c4f\u7279\u6548B"},effectAnimBigFull:{default:null,type:cc.Node,displayName:"\u4e2d\u5927\u5956\u5168\u5c4f\u7279\u6548"},BigWinGuang:{default:null,type:cc.Node,displayName:"\u4e2d\u5927\u5956\u80cc\u666f"},BigWinCoin:{default:null,type:cc.Node,displayName:"\u4e2d\u5927\u5956\u91d1\u989d"},bigWinResultAnim:{default:null,type:cc.Node,displayName:"bigWin\u4e2d\u5956"},BgNode:{default:null,type:cc.Node,displayName:"\u6e38\u620f\u80cc\u666f\u8282\u70b9"},freeBgNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u6447\u5956\u80cc\u666f\u8282\u70b9"},freeBeginNode:{default:null,type:cc.Node,displayName:"\u5f00\u59cb\u514d\u8d39\u6447\u5956\u8282\u70b9"},freeEndNode:{default:null,type:cc.Node,displayName:"\u7ed3\u675f\u514d\u8d39\u6447\u5956\u8282\u70b9"},freeTimesNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u6447\u5956\u663e\u793a\u8282\u70b9"},helpUI:{default:null,type:cc.Node,displayName:"help\u754c\u9762"},helpNum:{default:null,type:cc.Node,displayName:"help\u754c\u9762\u53ef\u53d8\u6ce8\u6570"},audioBtn:{default:null,type:cc.Sprite,displayName:"\u58f0\u97f3\u6309\u94ae"},BeiShuBg:{default:null,type:cc.SpriteFrame},BeginBtn:{default:null,type:cc.Node,displayName:"\u5f00\u59cb\u6309\u94ae"},longPressThreshold:1,isLongPressing:!1,isRoll:!1,count:0,GoldCount:0,ccccccc:0,allFreeTimes:0,ROLENUM:60,TIMEMIN:2,ISFast:!1,IntervalTime:.2,addcoin:0},onLoad:function(){this.touchNode=cc.find("Client/Canvas/Slot_Control_01/touch"),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchNode,this),this.BeginBtn.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.BeginBtn.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.BeginBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.playerInfo=e("PlayerInfo").getInstant,this.net=this.node.getComponent("NSTNetwork"),this.audio=this.node.getComponent("NSTAudio"),this.wheelList=[],this.bet=0,this.auto=!1,this.status=0,this.bigWinResList=[3,1,2],this.bigWinCard=0,this.bigWinCoin=0,this.bigWinBoo=!1,this.freeTimes=0,this.rollResult=[],this.rollIndex=0,this.lotteryRes=null,this.stopFree=!1,this.freeGameCoin=0,this.bIsFreeGame=!1},onTouchNode:function(){var e=cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1");e.getComponent(cc.Sprite).spriteFrame=null,cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1;for(var t=e.children,i=0;i<t.length;i++)t[i].children[0].active||(t[i].active=!1);this.BigWinCoin.getChildByName("lb_winCoin"),this.BigWinCoin.active&&(this.addcoin=this.lotteryRes.winscore)},onTouchStart:function(){this.isLongPressing=!0,this.scheduleOnce(this.performLongPressAction.bind(this),this.longPressThreshold)},onTouchEnd:function(){this.isLongPressing=!1,this.unschedule(this.performLongPressAction.bind(this))},onTouchCancel:function(){this.isLongPressing=!1,this.unschedule(this.performLongPressAction.bind(this)),console.log("\u6309\u952e\u53d6\u6d88\u53d6\u6d88\u8ba1\u65f6")},performLongPressAction:function(){this.isLongPressing&&(console.log("\u957f\u6309\u4e86"),this.isRoll=!0,cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!0)},start:function(){var e=this;this.BETNUM=80,this.lblLines.string=1024,this.lblWinCoin.string=0,this.setBet(),Helper.loadHead(this.playerInfo.playerHeadId,function(t){e.spUserFace.spriteFrame=t}),this.lblUserName.string=this.playerInfo.playerName,this.lblUserCoin.string="$"+this.playerInfo.playerCoin;for(var t=cc.find("Client/Canvas/Slot_Control_01/face/gold/gold"),i=this.playerInfo.playerCoin;i>1;)i/=10,t.x=t.x-13},onCLick:function(e,t){if("auto"==t){if(this.freeTimes>0||this.bigWinBoo||this.stopFree||this.bIsFreeGame)return;this.auto=!this.auto,this.autoBtn.spriteFrame=this.spAtlas.getSpriteFrame(this.auto?"btn_tingzhi":"btn_zidong"),this.auto&&0==this.status&&this.sendRoll()}else if("roll"==t){this.BigWinGuang.active=!1,this.BigWinCoin.active=!1,this.effectAnimFullA.active=!1,this.effectAnimFullB.active=!1,this.effectAnimBigFull.getComponent(sp.Skeleton).clearTrack(0),this.effectAnimBigFull.active=!1;var i=cc.find("Client/Canvas/Slot_Control_01/ymcl_zuidayazhu_anniu_01");if(i.getComponent(cc.Button).interactable||0!=this.status||(i.getComponent(cc.Button).interactable=!0),cc.audioEngine.stopEffect(this.audioId),this.audioId=void 0,this.audio.playClickSound(0),1!=cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active||this.isRoll){if(this.isRoll)console.log("00"),this.isRoll=!1;else if(this.isRoll=!1,!this.auto)if(0==this.status){this.status=2,this.closeShine();for(var n=0;n<20;n++)this.clsoeAnim(n%5,parseInt(n/5));this.sendRoll()}else this.status}else cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!==cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1").getComponent(cc.Sprite).spriteFrame&&this.FanBeiBtn("ss","1")}else if("add"==t){if(this.audio.playClickSound(0),this.index=0,this.freeTimes>0||this.bigWinBoo||this.stopFree||this.auto)return;this.bet+=1,this.kuang=cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1"),this.kuang.getChildByName("huangse_1c").getComponent(cc.Toggle).isChecked?this.index=1:this.kuang.getChildByName("huangse_5c").getComponent(cc.Toggle).isChecked?this.index=5:this.kuang.getChildByName("huangse_10c").getComponent(cc.Toggle).isChecked?this.index=10:this.kuang.getChildByName("huangse_20c").getComponent(cc.Toggle).isChecked?this.index=20:this.kuang.getChildByName("huangse_50c").getComponent(cc.Toggle).isChecked&&(this.index=50),5==this.bet&&(this.bet=0),this.setBet(this.index)}else if("dec"==t){if(this.audio.playClickSound(0),this.index=0,this.freeTimes>0||this.bigWinBoo||this.stopFree||this.auto)return;this.bet-=1,this.kuang=cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1"),this.kuang.getChildByName("huangse_1c").getComponent(cc.Toggle).isChecked?this.index=1:this.kuang.getChildByName("huangse_5c").getComponent(cc.Toggle).isChecked?this.index=5:this.kuang.getChildByName("huangse_10c").getComponent(cc.Toggle).isChecked?this.index=10:this.kuang.getChildByName("huangse_20c").getComponent(cc.Toggle).isChecked?this.index=20:this.kuang.getChildByName("huangse_50c").getComponent(cc.Toggle).isChecked&&(this.index=50),-1==this.bet&&(this.bet=4),this.setBet(this.index)}else if("max"==t){if(this.audio.playClickSound(1),this.freeTimes>0||this.bigWinBoo||this.stopFree||this.auto)return;this.bet=4,this.bet=this.bet>=0?this.bet:0,this.node=cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1"),this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_50c").getComponent(cc.Toggle).isChecked=!0,this.node.getChildByName("huangse_1c").active=!1,this.node.getChildByName("huangse_5c").active=!1,this.node.getChildByName("huangse_10c").active=!1,this.node.getChildByName("huangse_20c").active=!1,this.node.getChildByName("huangse_50c").active=!0,this.setBet(50)}else if("closeBigWin"==t)this.bigWinResultAnim.active=!1,this.audio.playBgm(0);else if("help"==t){this.audio.playClickSound(2),this.helpUI.active=!0;var s=this.helpNum.children;for(var o in s)s[o].getComponent(cc.Label).string=l[o]*a[this.bet]}else"closeHelp"==t?(this.audio.playClickSound(3),this.helpUI.active=!1):"exitGame"==t?(this.audio.playClickSound(2),this.net.socket.disconnect(),cc.director.loadScene("LobbyMain")):"audio"==t?(this.audio.pInfo.musicControl=!this.audio.pInfo.musicControl,this.audioBtn.spriteFrame=this.spAtlas.getSpriteFrame(this.audio.pInfo.musicControl?"btn_sound":"btn_sound_2"),this.audio.pInfo.musicControl?this.freeTimes>0?this.audio.playBgm(1):this.bigWinBoo?this.audio.playBgm(2):this.audio.playBgm(0):this.audio.stopAudio()):"stop"==t&&(this.DisableButtom(1),this.count=0,this.auto=!1,cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount").active=!1,cc.find("Client/Canvas/Slot_Control_01/zt").active=!1,cc.find("Client/Canvas/Slot_Control_01/ks_1").active=!0,this.ROLENUM=60,this.TIMEMIN=2,this.ISFast=!1,this.IntervalTime=.2)},setBet:function(e){for(var t in e||(e=1),0==this.bet?this.lblBet.string="$"+80*e:1==this.bet?this.lblBet.string="$"+160*e:2==this.bet?this.lblBet.string="$"+320*e:3==this.bet?this.lblBet.string="$"+480*e:4==this.bet&&(this.lblBet.string="$"+800*e),this.lblCurBet.string=this.lblBet.string.slice(1),this.lblCoinList)this.lblCoinList[t].string=o[t]*(this.bet+1)*this.BETNUM},stateCallBack:function(){var e=this,t=0;for(var i in this.wheelList)if(this.wheelList[i].status){t=1;break}if(this.status=t,0==this.status){0==this.count&&this.DisableButtom(1);var n=this.rollIndex;this.lblUserCoin.string="$"+this.lotteryRes.userscore/this.playerInfo.exchangeRate,this.bIsFreeGame&&(this.freeGameCoin+=this.lotteryRes.winscore);var s=this.lotteryRes.winscore;s>0&&!this.bIsFreeGame?(this.lblWinCoin.string=Math.ceil(this.lotteryRes.winscore/this.playerInfo.exchangeRate),this.lblWinCoin2.node.active=!0,this.lblWinCoin2.getComponent(cc.Label).string=Math.ceil(this.lotteryRes.winscore)):s>0&&this.bIsFreeGame?(this.lblWinCoin2.node.active=!0,this.lblWinCoin2.getComponent(cc.Label).string=this.freeGameCoin,this.lblWinCoin.string=this.freeGameCoin):(s=0)?(this.lblWinCoin2.node.active=!1,this.lblWinCoin.string="0"):(s=0)&&(this.lblWinCoin2.node.active=!0,this.lblWinCoin2.getComponent(cc.Label).string=this.freeGameCoin,this.lblWinCoin.string=this.freeGameCoin);var o=this.lotteryRes.viewarray.getFreeTime.bFlag;if(this.lotteryRes.viewarray.getFreeTime.bFlag)this.audio.playFreeGameSound(1),this.DisableButtom(0),setTimeout(function(){for(var t in e.wheelList)for(var i=e.wheelList[t].rolePbList.length-2;i>=e.wheelList[t].rolePbList.length-5;i--){var n=e.wheelList[t].rolePbList[i];"slots_71"==n.name&&(n.getChildByName("Scatter").getComponent(sp.Skeleton).setAnimation(0,"Scatter_Loop",!0),n.getChildByName("SSC").active=!1)}},1500),this.scheduleOnce(function(){if(0==e.freeTimes){e.freeTimes=e.lotteryRes.viewarray.getFreeTime.nFreeTime,e.allFreeTimes=e.freeTimes;for(var t=e.freeBeginNode.children,i=0;i<t.length;i++)t[i].name=="normal_"+e.freeTimes||"bg"==t[i].name?t[i].active=!0:t[i].active=!1;e.freeBeginNode.active=!0,e.audio.playFreeGameSound(2),e.scheduleOnce(function(){for(var t in e.freeBeginNode.active=!1,e.wheelList)e.wheelList[t].LayoutVerTical();e.startFreeGame()},3)}else e.freeTimes=e.lotteryRes.viewarray.getFreeTime.nFreeTime,e.stopFree=!1},4.5);else{var a=.1;this.lotteryRes.freeCount>this.freeTimes&&(this.DisableButtom(0),a=4,this.audio.playFreeGameSound(1),setTimeout(function(){cc.find("Client/Canvas/extraFreeGames").getComponent("cc.Animation").play("addFreeGame"),e.audio.playFreeGameSound(5)},1e3)),this.scheduleOnce(function(){n==e.rollIndex&&e.playWinAnim(o)},a)}}},playWinAnim:function(e){var t=this;if(this.lotteryRes.freeCount>this.freeTimes){var i=cc.find("Client/Canvas/extraFreeGames");for(var n in i.getComponent("cc.Animation").play("closeAddFreeGame"),this.freeTimes+=5,this.allFreeTimes+=5,this.DisableButtom(1),this.wheelList)for(var s=this.wheelList[n].rolePbList.length-2;s>=this.wheelList[n].rolePbList.length-5;s--){var o=this.wheelList[n].rolePbList[s];"slots_71"==o.name&&(o.getChildByName("Scatter").getComponent(sp.Skeleton).setAnimation(0,"Scatter_Loop",!0),o.getChildByName("SSC").active=!1)}}if(this.freeTimes>0&&!e&&(this.freeTimes--,this.freeTimesNode.getChildByName("txt").getChildByName("New Label").getComponent(cc.Label).string=this.freeTimes+"/"+this.allFreeTimes,0==this.freeTimes&&(this.stopFree=!0)),this.stopFree){this.count=0,cc.find("Client/Canvas/Slot_Control_01/zt").active=!1,cc.find("Client/Canvas/Slot_Control_01/ks_1").active=!0,this.DisableButtom(0);var a=3e3;this.lotteryRes.winscore>5*parseInt(this.lblCurBet.string)&&(a=7e3),setTimeout(function(){t.stopFree=!1,t.stopFreeTimes(),t.DisableButtom(1)},a)}var l=this.lotteryRes.viewarray.nHandCards,c=this.lotteryRes.viewarray.nWinCards,h=0,r=!0,d=!0;if(this.bIsFreeGame)for(var u=!0,g=0;g<20;g++){if(13==l[g]&&c[g]){var C=(g+5)%5,m=Math.floor(g/5)+1;this.wheelList[C].rolePbList[this.wheelList[C].rolePbList.length-m-1].getChildByName("slots_83").getComponent(sp.Skeleton).setAnimation(0,"H1",!0),d&&(d=!1,this.audio.playH1Sound())}9==l[g]&&c[g]&&function(){var i=(g+5)%5,n=Math.floor(g/5)+1,s=t.wheelList[i].rolePbList[t.wheelList[i].rolePbList.length-n-1].getChildByName("slots_51"),o="Wild_Introx3";2==t.lotteryRes.viewarray.nfreeWildBet[h]&&(o="Wild_Introx2");var a=0,l=s.getComponent(sp.Skeleton);u&&(u=!1,l.setCompleteListener(function(){++a>=2?(t.MultipleTimesComplete(e),a=0):t.audio.playFreeGameSound(4)})),l.setAnimation(0,o,!0),t.audio.playFreeGameSound(4),h+=1,r=!1}()}else for(var f=0;f<20;f++)if(13==l[f]&&c[f]){var p=(f+5)%5,y=Math.floor(f/5)+1;this.wheelList[p].rolePbList[this.wheelList[p].rolePbList.length-y-1].getChildByName("slots_83").getComponent(sp.Skeleton).setAnimation(0,"H1",!0),d&&(d=!1,this.audio.playH1Sound())}r&&this.MultipleTimesComplete(e)},MultipleTimesComplete:function(){var e=this,t=[];for(var i in this.lotteryRes.viewarray.nWinCards)this.lotteryRes.viewarray.nWinCards[i]&&t.push(i);var n=this.lotteryRes.viewarray.nWinLinesDetail,s=[t].concat(n);this.PlayRectRoundAnim(s),this.AniTime=this.ISFast?3:5;var o=s.length-1;if(this.scheduleOnce(this.EndAutoCountCallback.bind(this),o>0?this.AniTime:.5),o>0)if(this.lotteryRes.winscore>20*this.lblCurBet.string){this.audioId=this.audio.playBW(2),this.effectAnimBigFull.active=!0,this.BigWinCoin.active=!0,this.BigWinGuang.active=!0,this.effectAnimBigFull.getComponent(sp.Skeleton).clearTrack(0),this.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"MegaWin_intro",!1);var a=this.BigWinCoin.getChildByName("lb_winCoin").getComponent(cc.Label);this.addcoin=0;var l=!1;this.schedule(function(){l||(e.addcoin+=Math.ceil(e.lotteryRes.winscore/50),e.addcoin>e.lotteryRes.winscore&&(e.addcoin=Math.ceil(e.lotteryRes.winscore),e.audio.playBigCionSound(5),l=!0),a.string=e.addcoin/e.playerInfo.exchangeRate)},.05,50,.01);var c=this;this.effectAnimBigFull.getComponent(sp.Skeleton).setCompleteListener(function(e){"MegaWin_intro"===e.animation.name&&(c.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"MegaWin_idle",!0),c.scheduleOnce(function(){c.effectAnimBigFull.active=!1,c.BigWinCoin.active=!1,c.BigWinGuang.active=!1},5))},this)}else if(this.lotteryRes.winscore>10*this.lblCurBet.string){this.audioId=this.audio.playBW(1),this.BigWinGuang.active=!0,this.effectAnimBigFull.active=!0,this.BigWinCoin.active=!0,this.effectAnimBigFull.getComponent(sp.Skeleton).clearTrack(0),this.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"SuperWin_intro",!1);var h=this.BigWinCoin.getChildByName("lb_winCoin").getComponent(cc.Label);this.addcoin=0;var r=!1;this.schedule(function(){r||(e.addcoin+=Math.ceil(e.lotteryRes.winscore/50),e.addcoin>e.lotteryRes.winscore&&(e.addcoin=Math.ceil(e.lotteryRes.winscore),e.audio.playBigCionSound(5),r=!0),h.string=e.addcoin/e.playerInfo.exchangeRate)},.05,50,.01);var d=this;this.effectAnimBigFull.getComponent(sp.Skeleton).setCompleteListener(function(e){"SuperWin_intro"===e.animation.name&&(d.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"SuperWin_idle",!0),d.scheduleOnce(function(){d.effectAnimBigFull.active=!1,d.BigWinCoin.active=!1,d.BigWinGuang.active=!1},5))},this)}else if(this.lotteryRes.winscore>5*this.lblCurBet.string){this.audioId=this.audio.playBW(0),this.BigWinGuang.active=!0,this.effectAnimBigFull.active=!0,this.BigWinCoin.active=!0,this.effectAnimBigFull.getComponent(sp.Skeleton).clearTrack(0),this.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"BigWin_intro",!1);var u=this.BigWinCoin.getChildByName("lb_winCoin").getComponent(cc.Label);this.addcoin=0;var g=!1;this.schedule(function(){g||(e.addcoin+=Math.ceil(e.lotteryRes.winscore/50),e.addcoin>e.lotteryRes.winscore&&(e.addcoin=Math.ceil(e.lotteryRes.winscore),e.audio.playBigCionSound(5),g=!0),u.string=e.addcoin/e.playerInfo.exchangeRate)},.05,50,.01);var C=this;this.effectAnimBigFull.getComponent(sp.Skeleton).setCompleteListener(function(e){"BigWin_intro"===e.animation.name&&(C.effectAnimBigFull.getComponent(sp.Skeleton).setAnimation(0,"BigWin_idle",!0),C.scheduleOnce(function(){C.effectAnimBigFull.active=!1,C.BigWinCoin.active=!1,C.BigWinGuang.active=!1},5))},this)}},PlayRectRoundAnim:function(e){var t=this,i=this.rollIndex,n=0;this.schedule(function(){if(i==t.rollIndex){for(var s=0;s<20;s++)t.clsoeAnim(s%5,parseInt(s/5));for(var o in e[n]||(n=0),e[n])t.showAnim(e[n][o]%5,parseInt(e[n][o]/5),t.lotteryRes.viewarray.fMultiple);n++}},3,cc.macro.REPEAT_FOREVER,.01)},EndAutoCountCallback:function(){if(this.BigWinGuang.active=!1,this.BigWinCoin.active=!1,this.effectAnimFullA.active=!1,this.effectAnimFullB.active=!1,this.effectAnimBigFull.getComponent(sp.Skeleton).clearTrack(0),this.effectAnimBigFull.active=!1,this.count>0||this.count<0){this.count-=1,this.auto=!0;var e=cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount");this.count<0?e.active=!1:e.active=!0,e.getChildByName("shuzi").getComponent(cc.Label).string=this.count+1,this.auto&&this.sendRoll()}else 0==this.count&&(this.auto=!1,cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount").active=!1,cc.find("Client/Canvas/Slot_Control_01/zt").active=!1,cc.find("Client/Canvas/Slot_Control_01/ks_1").active=!0)},AutoIndex:function(e,t){var i=parseInt(t);if(0==this.status)if(cc.find("Client/Canvas/Slot_Control_01/ks_1").active=!1,cc.find("Client/Canvas/Slot_Control_01/zt").active=!0,10==i){console.log("\u70b9\u51fb\u81ea\u52a810\u6b21");var n=cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount");n.active=!0,n.getChildByName("shuzi").getComponent(cc.Label).string="10",cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=9,this.auto=!0,0!=this.status?cc.director.getScheduler().schedule(this.sendRoll,this,0,0,3,!1):this.sendRoll()}else if(50==i){console.log("\u70b9\u51fb\u81ea\u52a850\u6b21");var s=cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount");s.active=!0,s.getChildByName("shuzi").getComponent(cc.Label).string="50",cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=49,this.auto=!0,this.sendRoll()}else if(100==i){console.log("\u70b9\u51fb\u81ea\u52a8100\u6b21");var o=cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount");o.active=!0,o.getChildByName("shuzi").getComponent(cc.Label).string="100",cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=99,this.auto=!0,this.sendRoll()}else if(500==i){console.log("\u70b9\u51fb\u81ea\u52a8500\u6b21");var a=cc.find("Client/Canvas/Slot_Control_01/zt/AutoCount");a.active=!0,a.getChildByName("shuzi").getComponent(cc.Label).string="500",cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=499,this.auto=!0,this.sendRoll()}else-1==i?(console.log("\u70b9\u51fb\u81ea\u52a8\u65e0\u7a77\u4e14\u5feb\u901f"),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=-1,this.auto=!0,this.sendRoll(),this.ROLENUM=16,this.TIMEMIN=.4,this.ISFast=!0,this.IntervalTime=0):-2==i&&(console.log("\u70b9\u51fb\u81ea\u52a8\u65e0\u7a77\u6b21"),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,this.count=-2,this.auto=!0,this.sendRoll())},startFreeGame:function(){for(var e in this.lblWinCoin2.getComponent(cc.Label).string="0",this.lblWinCoin.string="0",this.count=0,this.auto=!1,cc.find("Client/Canvas/Slot_Control_01/zt").active=!1,cc.find("Client/Canvas/Slot_Control_01/ks_1").active=!0,this.ROLENUM=60,this.TIMEMIN=2,this.ISFast=!1,this.IntervalTime=.2,console.log("startFreeGame"),this.audio.playBgm(1),this.freeGameCoin=0,this.BgNode.active=!1,this.bIsFreeGame=!0,this.freeBgNode.active=!0,this.wheelList)this.wheelList[e].initWheel();this.freeTimesNode.active=!0,this.freeTimesNode.getChildByName("txt").getChildByName("New Label").getComponent(cc.Label).string=this.freeTimes+"/"+this.allFreeTimes,this.sendRoll()},stopFreeTimes:function(){var e=this;for(var t in console.log("stopFreeTimes freeGameCoin : ",this.freeGameCoin),cc.audioEngine.stopMusic(),this.audio.playFreeGameSound(3),this.scheduleOnce(function(){e.audio.playBgm(0)},3),this.auto=!1,this.count=0,this.onCLick("ss","stop"),this.freeHideNode)this.freeHideNode[t].active=!0;for(var i in this.wheelList)this.wheelList[i].initWheel();this.freeTimesNode.active=!1,this.freeEndNode.active=!0,this.freeEndNode.getChildByName("lbl_coin").getComponent(cc.Label).string=this.freeGameCoin/this.playerInfo.exchangeRate,this.scheduleOnce(function(){e.freeEndNode.active=!1,e.BgNode.active=!0,e.freeBgNode.active=!1,e.bIsFreeGame=!1},3),0!=this.count&&this.sendRoll()},showAnim:function(e,t,i){var n=this.wheelList[e].roleIdList.length+1;this.wheelList[e].rolePbList[n-3-t]&&(this.wheelList[e].rolePbList[n-3-t].getComponent("TempAnimation").playAnim(),this.wheelList[e].rolePbList[n-3-t].getChildByName("beishu")&&i>1&&(this.wheelList[e].rolePbList[n-3-t].getChildByName("beishu").active=!0,this.wheelList[e].rolePbList[n-3-t].getChildByName("beishu").getComponent(cc.Label).string="x"+i),this.effectAnimPr.children[4*e+t].active=!0)},clsoeAnim:function(e,t){var i=this.wheelList[e].rolePbList[57-t];i&&(i.getComponent("TempAnimation").stopAnim(),this.wheelList[e].rolePbList[57-t].getChildByName("beishu")&&(this.wheelList[e].rolePbList[57-t].getChildByName("beishu").active=!1),this.effectAnimPr.children[4*e+t].active=!1)},checkRollData:function(e){for(var t,n=i(e);!(t=n()).done;)if(t.value>=this.rolePb.length)return!1;return!0},roll:function(e){if(this.checkRollData(e)){this.status=1;for(var t=[],i=0;i<5;i++)t[i]=[];for(var n in e)t[n%5][3-parseInt(n/5)]=e[n];for(var s in this.wheelList){var o;(o=this.wheelList[s]).startRoll.apply(o,t[s])}}else alert("\n            \u670d\u52a1\u5668\u83b7\u53d6\u7684\u82b1\u8272\u79cd\u7c7b\u5927\u4e8e\u73b0\u6709\u7684\u82b1\u8272\u79cd\u7c7b\uff01\uff01\uff01\n            \u8bf7\u8054\u7cfb\u670d\u52a1\u5668\u4eba\u5458\u8fdb\u884c\u6570\u636e\u8c03\u6574\uff01")},closeShine:function(){var e=this.effectAnimPr.children;for(var t in e)e[t].active=!1},sendRoll:function(){this.timerCallback&&this.unschedule(this.timerCallback),this.GoldCount=0,this.DisableButtom(0),0!=this.count&&(cc.find("Client/Canvas/Slot_Control_01/ks_1").getComponent(cc.Button).interactable=!0),this.rollIndex++,this.closeShine(),this.net.socket.emit("lottery",JSON.stringify({bet:this.ccccccc,nBetList:[parseInt(this.lblBet.string.replace(/[^0-9.-]/g,""))]}))},stopImmediately:function(){if(!this.auto)for(var e in this.wheelList)this.wheelList[e].stopImmediately()},FanBeiBtn:function(e,t){var i=parseInt(t);this.node=cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1"),1==i?(this.ccccccc=0,this.audio.playClickSound(0),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!=this.node.getComponent(cc.Sprite).spriteFrame?(this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_5c").active=!1,this.node.getChildByName("huangse_10c").active=!1,this.node.getChildByName("huangse_20c").active=!1,this.node.getChildByName("huangse_50c").active=!1,this.bet=0):(this.node.getComponent(cc.Sprite).spriteFrame=this.BeiShuBg,this.node.getChildByName("huangse_5c").active=!0,this.node.getChildByName("huangse_10c").active=!0,this.node.getChildByName("huangse_20c").active=!0,this.node.getChildByName("huangse_50c").active=!0),this.setBet(1)):5==i?(this.ccccccc=1,this.audio.playClickSound(0),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!=this.node.getComponent(cc.Sprite).spriteFrame?(this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_1c").active=!1,this.node.getChildByName("huangse_10c").active=!1,this.node.getChildByName("huangse_20c").active=!1,this.node.getChildByName("huangse_50c").active=!1,this.bet=0):(this.node.getComponent(cc.Sprite).spriteFrame=this.BeiShuBg,this.node.getChildByName("huangse_1c").active=!0,this.node.getChildByName("huangse_10c").active=!0,this.node.getChildByName("huangse_20c").active=!0,this.node.getChildByName("huangse_50c").active=!0),this.setBet(5)):10==i?(this.ccccccc=2,this.audio.playClickSound(0),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!=this.node.getComponent(cc.Sprite).spriteFrame?(this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_1c").active=!1,this.node.getChildByName("huangse_5c").active=!1,this.node.getChildByName("huangse_20c").active=!1,this.node.getChildByName("huangse_50c").active=!1,this.bet=0):(this.node.getComponent(cc.Sprite).spriteFrame=this.BeiShuBg,this.node.getChildByName("huangse_1c").active=!0,this.node.getChildByName("huangse_5c").active=!0,this.node.getChildByName("huangse_20c").active=!0,this.node.getChildByName("huangse_50c").active=!0),this.setBet(10)):20==i?(this.ccccccc=3,this.audio.playClickSound(0),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!=this.node.getComponent(cc.Sprite).spriteFrame?(this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_1c").active=!1,this.node.getChildByName("huangse_5c").active=!1,this.node.getChildByName("huangse_10c").active=!1,this.node.getChildByName("huangse_50c").active=!1,this.bet=0):(this.node.getComponent(cc.Sprite).spriteFrame=this.BeiShuBg,this.node.getChildByName("huangse_1c").active=!0,this.node.getChildByName("huangse_5c").active=!0,this.node.getChildByName("huangse_10c").active=!0,this.node.getChildByName("huangse_50c").active=!0),this.setBet(20)):50==i&&(this.ccccccc=4,this.audio.playClickSound(0),cc.find("Client/Canvas/Slot_Control_01/ks_1/zidong").active=!1,null!=this.node.getComponent(cc.Sprite).spriteFrame?(this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getChildByName("huangse_1c").active=!1,this.node.getChildByName("huangse_5c").active=!1,this.node.getChildByName("huangse_10c").active=!1,this.node.getChildByName("huangse_20c").active=!1,this.bet=0):(this.node.getComponent(cc.Sprite).spriteFrame=this.BeiShuBg,this.node.getChildByName("huangse_1c").active=!0,this.node.getChildByName("huangse_5c").active=!0,this.node.getChildByName("huangse_10c").active=!0,this.node.getChildByName("huangse_20c").active=!0),this.setBet(50))},nextPageBtn:function(e,t){this.audio.playClickSound(4);var i=cc.find("Client/Canvas/com_help/help_bg/New PageView/view/content");if("left"===t){for(var n=1;n<4;n++)if(i.getChildByName("slots_ptable_"+n).active){if(i.getChildByName("slots_ptable_"+n).active=!1,1==n){i.getChildByName("slots_ptable_3").active=!0;break}i.getChildByName("slots_ptable_"+(n-1)).active=!0;break}}else if("right"===t)for(var s=1;s<4;s++)if(i.getChildByName("slots_ptable_"+s).active){if(i.getChildByName("slots_ptable_"+s).active=!1,3==s){i.getChildByName("slots_ptable_1").active=!0;break}i.getChildByName("slots_ptable_"+(s+1)).active=!0;break}},DisableButtom:function(e){var t=[cc.find("Client/Canvas/Slot_Control_01/ks_1"),cc.find("Client/Canvas/Slot_Control_01/ymcl_zuidayazhu_anniu_01"),cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1/huangse_1c"),cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1/huangse_5c"),cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1/huangse_10c"),cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1/huangse_20c"),cc.find("Client/Canvas/Slot_Control_01/Casino_C_kuang_1/huangse_50c"),cc.find("Client/Canvas/Slot_Control_01/btn_jia"),cc.find("Client/Canvas/Slot_Control_01/btn_jian"),cc.find("Client/Canvas/fanhuidating")];if(0==e)for(var i=0;i<t.length;i++)t[i].getComponent(cc.Button)?t[i].getComponent(cc.Button).interactable=!1:t[i].getComponent(cc.Toggle)&&(t[i].getComponent(cc.Toggle).interactable=!1);else if(1==e)for(var n=0;n<t.length;n++)t[n].getComponent(cc.Button)?t[n].getComponent(cc.Button).interactable=!0:t[n].getComponent(cc.Toggle)&&(t[n].getComponent(cc.Toggle).interactable=!0)}}),cc._RF.pop()},{PlayerInfo:void 0}],NSTNetwork:[function(e,t){"use strict";cc._RF.push(t,"aace46qKe1OHpr9Fqkyy4om","NSTNetwork"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainObj=this.node.getComponent("NSTMain"),this.playerInfo=e("PlayerInfo").getInstant,this.audio=this.node.getComponent("NSTAudio")},start:function(){this.url=Lhjconfig.Server_IP+":15048",this.socket=io.connect(this.url),this.addEvent()},addEvent:function(){var e=this;this.socket.on("connected",function(){e.socket.emit("LoginGame",JSON.stringify({userid:e.playerInfo.playerId,gametype:null,sign:e.playerInfo.gameSign}))}),this.socket.on("loginGameResult",function(t){t=e.changeResultJSON_Function(t),console.log("LoginGameResult:",t),window.LBXDC_LOBBYNET.disconnect(),e.socket.emit("LoginfreeCount")}),this.socket.on("lotteryResult",function(t){t=e.changeResultJSON_Function(t),console.log("lotteryResult:",t),t.ResultCode&&1==t.ResultCode?(e.mainObj.lotteryRes=JSON.parse(JSON.stringify(t.ResultData)),e.mainObj.roll(t.ResultData.viewarray.nHandCards)):e.mainObj.status=0}),this.socket.on("LoginRoomResult",function(t){t=e.changeResultJSON_Function(t),console.log("LoginRoomResult",t)}),this.socket.on("LoginfreeCountResult",function(t){t=e.changeResultJSON_Function(t),console.log("LoginfreeCountResult:",t),1==t.ResultCode&&t.freeCount>0&&(e.mainObj.freeTimes=t.freeCount-1,e.mainObj.allFreeTimes=t.freeCount-1,e.mainObj.closeShine(),e.mainObj.startFreeGame())})},changeResultJSON_Function:function(e){return cc.sys.isNative?JSON.parse(e):e},onDestroy:function(){this.socket.emit("cleanLineOut")}}),cc._RF.pop()},{PlayerInfo:void 0}],NSTWheel:[function(e,t){"use strict";cc._RF.push(t,"4bb2eX3dBxJNbwWNSCLAyXG","NSTWheel"),cc.Class({extends:cc.Component,properties:{wheelId:0,excludeId:{default:0,displayName:"\u4e0d\u4f1a\u51fa\u73b0\u7684\u6570\u5b57id"}},onLoad:function(){this.audio=cc.find("Client/Canvas").getComponent("NSTAudio"),this.mainObj=cc.find("Client/Canvas").getComponent("NSTMain"),this.mainObj.wheelList[this.wheelId]=this,this.status=0,this.lastResult=[0,0,0,0,0],this.rolePbList=[],this.roleIdList=[]},start:function(){this.initWheel()},initWheel:function(){this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren();for(var e=0;e<this.mainObj.ROLENUM-2;e++)this.addRole(this.getRandomId());this.addRole(this.getRandomId()),this.node.y=0,this.mainObj.rollIndex++,this.mainObj.closeShine()},startRoll:function(){for(var e in this.LayoutVerTical(),this.status=1,this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren(),this.node.y=0,this.lastResult)this.lastResult[e]=0==this.lastResult[e]?this.getRandomId():this.lastResult[e],this.addRole(this.lastResult[e]);for(var t=0;t<this.mainObj.ROLENUM-12;t++)this.addRole(this.getRandomId());this.addRole(this.getRandomId());for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];for(var o in n)this.addRole(n[o]);this.addRole(this.getRandomId());var a=this.mainObj.TIMEMIN+this.wheelId*this.mainObj.IntervalTime;this.mainObj.ISFast&&this.node.height>5e3?this.node.height=1576.499999999995:!this.mainObj.ISFast&&this.node.height<2e3&&(this.node.height=6200.900000000005),this.node.runAction(cc.sequence(cc.moveTo(a,cc.v2(this.node.x,528-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,596-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,528-this.node.height)),cc.callFunc(this.rollCallBack.bind(this))))},getRandomId:function(){for(var e=0;0==e;)e=(e=this.mainObj.freeTimes>0||this.mainObj.stopFree?6==(e=Math.floor(Math.random()*(this.mainObj.rolePb.length-1)+1))?12:e:Math.floor(Math.random()*(this.mainObj.rolePb.length-1)+1))==this.excludeId?0:e;return e},addRole:function(e){e||(e=Math.floor(13*Math.random())+1);var t=cc.instantiate(this.mainObj.rolePb[e]);this.rolePbList.push(t),this.roleIdList.push(e),this.node.addChild(t)},rollCallBack:function(){this.audio.playStopWheel(),this.lastResult=this.roleIdList.slice(-5);for(var e=this.roleIdList.length-2;e>=this.roleIdList.length-5;e--){var t=this.rolePbList[e];if(t&&"slots_71"==t.name){t.getChildByName("Scatter").getComponent(sp.Skeleton).setAnimation(0,"Scatter_Intro",!1),1==this.mainObj.GoldCount&&this.audio.playFreeGameSound(0),this.mainObj.GoldCount>4&&(this.mainObj.GoldCount=4);var i=this.node.getComponent(cc.Layout);i.type=cc.Layout.Type.NONE,i.updateLayout(),t.zIndex=cc.macro.MAX_ZINDEX,this.audio.playBigCionSound(this.mainObj.GoldCount),this.mainObj.GoldCount++}}this.status=0,this.mainObj.stateCallBack()},stopImmediately:function(){var e=this;this.lastResult=this.roleIdList.slice(-5),this.node.stopAllActions(),setTimeout(function(){e.node.y=528-e.node.height},50),this.status=0,this.mainObj.stateCallBack()},LayoutVerTical:function(){var e=this.node.getComponent(cc.Layout);e.type=cc.Layout.Type.VERTICAL,e.updateLayout()}}),cc._RF.pop()},{}]},{},["NSTAudio","NSTMain","NSTNetwork","NSTWheel"]);